{"version":3,"file":"main.iife.js","sources":["../../../node_modules/.pnpm/side-effect-manager@1.2.2/node_modules/side-effect-manager/dist/index.mjs","../../../node_modules/.pnpm/randomcolor@0.6.2/node_modules/randomcolor/randomColor.js","../../../node_modules/.pnpm/@netless+app-shared@0.1.2_side-effect-manager@1.2.2/node_modules/@netless/app-shared/dist/logger.js","../src/utils.ts","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/utils/resizeObservers.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/algorithms/hasActiveObservations.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/algorithms/hasSkippedObservations.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/algorithms/deliverResizeLoopError.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/ResizeObserverBoxOptions.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/utils/freeze.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/ResizeObserverSize.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/DOMRectReadOnly.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/utils/element.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/utils/global.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/algorithms/calculateBoxSize.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/ResizeObserverEntry.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/algorithms/calculateDepthForNode.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/algorithms/broadcastActiveObservations.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/algorithms/gatherActiveObservationsAtDepth.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/utils/process.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/utils/queueMicroTask.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/utils/queueResizeObserver.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/utils/scheduler.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/ResizeObservation.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/ResizeObserverDetail.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/ResizeObserverController.js","../../../node_modules/.pnpm/@juggle+resize-observer@3.4.0/node_modules/@juggle/resize-observer/lib/ResizeObserver.js","../src/renderer.ts","../src/icons/arrow-left.ts","../src/icons/arrow-right.ts","../src/footer.ts","../src/connect.ts","../src/hardcode.ts","../src/index.ts"],"sourcesContent":["// src/gen-uid.ts\nvar SOUP = \"!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\nvar SOUP_LEN = 87;\nvar ID_LEN = 20;\nvar reusedIdCarrier = [];\nvar genUID = () => {\n  for (let i = 0; i < ID_LEN; i++) {\n    reusedIdCarrier[i] = SOUP.charAt(Math.random() * SOUP_LEN);\n  }\n  return reusedIdCarrier.join(\"\");\n};\n\n// src/utils.ts\nfunction invoke(fn) {\n  try {\n    return fn();\n  } catch (e) {\n    console.error(e);\n  }\n}\n\n// src/side-effect-manager.ts\nvar SideEffectManager = class {\n  constructor() {\n    /**\n     * @alias addDisposer\n     * Add a disposer directly.\n     * @param disposer a disposer or a list of disposers\n     * @param disposerID Optional id for the disposer\n     * @returns disposerID\n     */\n    this.push = this.addDisposer;\n    /**\n     * All disposers. Use this only when you know what you are doing.\n     */\n    this.disposers = /* @__PURE__ */ new Map();\n  }\n  /**\n   * Add a disposer directly.\n   * @param disposer a disposer or a list of disposers\n   * @param disposerID Optional id for the disposer\n   * @returns disposerID\n   */\n  addDisposer(disposer, disposerID = this.genUID()) {\n    this.flush(disposerID);\n    this.disposers.set(\n      disposerID,\n      Array.isArray(disposer) ? joinDisposers(disposer) : disposer\n    );\n    return disposerID;\n  }\n  /**\n   * Add a side effect.\n   * @param executor Executes side effect. Return a disposer or a list of disposers. Returns null or false to ignore.\n   * @param disposerID Optional id for the disposer\n   * @returns disposerID\n   */\n  add(executor, disposerID = this.genUID()) {\n    const disposers = executor();\n    return disposers ? this.addDisposer(disposers, disposerID) : disposerID;\n  }\n  addEventListener(el, type, listener, options, disposerID = this.genUID()) {\n    el.addEventListener(type, listener, options);\n    this.addDisposer(\n      () => el.removeEventListener(type, listener, options),\n      disposerID\n    );\n    return disposerID;\n  }\n  /**\n   * Sugar for setTimeout.\n   * @param handler\n   * @param timeout\n   * @param disposerID Optional id for the disposer\n   * @returns disposerID\n   */\n  setTimeout(handler, timeout, disposerID = this.genUID()) {\n    const ticket = window.setTimeout(() => {\n      this.remove(disposerID);\n      handler();\n    }, timeout);\n    return this.addDisposer(() => window.clearTimeout(ticket), disposerID);\n  }\n  /**\n   * Sugar for setInterval.\n   * @param handler\n   * @param timeout\n   * @param disposerID Optional id for the disposer\n   * @returns disposerID\n   */\n  setInterval(handler, timeout, disposerID = this.genUID()) {\n    const ticket = window.setInterval(handler, timeout);\n    return this.addDisposer(() => window.clearInterval(ticket), disposerID);\n  }\n  /**\n   * Remove but not run the disposer. Do nothing if not found.\n   * @param disposerID\n   */\n  remove(disposerID) {\n    const disposer = this.disposers.get(disposerID);\n    this.disposers.delete(disposerID);\n    return disposer;\n  }\n  /**\n   * Remove and run the disposer. Do nothing if not found.\n   * @param disposerID\n   */\n  flush(disposerID) {\n    const disposer = this.remove(disposerID);\n    if (disposer) {\n      disposer();\n    }\n  }\n  /**\n   * Remove and run all of the disposers.\n   */\n  flushAll() {\n    this.disposers.forEach(invoke);\n    this.disposers.clear();\n  }\n  genUID() {\n    let uid;\n    do {\n      uid = genUID();\n    } while (this.disposers.has(uid));\n    return uid;\n  }\n};\nfunction joinDisposers(disposers) {\n  return () => disposers.forEach(invoke);\n}\n\n// src/async-side-effect-manager.ts\nvar AsyncSideEffectManager = class {\n  constructor() {\n    /**\n     * @alias addDisposer\n     * Add a disposer directly.\n     * @param disposer a disposer\n     * @param disposerID Optional id for the disposer\n     * @returns disposerID\n     */\n    this.push = this.addDisposer;\n    /**\n     * @returns a Promise resolved when current tasks are finished.\n     */\n    this.finished = Promise.resolve();\n    /**\n     * All disposers. Use this only when you know what you are doing.\n     */\n    this.disposers = /* @__PURE__ */ new Map();\n    this._n = /* @__PURE__ */ new Map();\n    this._i = /* @__PURE__ */ new Set();\n  }\n  /**\n   * Add a side effect.\n   * @param executor Execute side effect. Return a disposer or a disposer array. Return null or false to ignore.\n   * @param disposerID Optional id for the disposer\n   * @returns disposerID\n   */\n  add(executor, disposerID = this.genUID()) {\n    if (this._i.has(disposerID)) {\n      this._n.set(disposerID, () => this._a(executor, disposerID));\n    } else {\n      this._a(executor, disposerID);\n    }\n    return disposerID;\n  }\n  async _a(executor, disposerID) {\n    this._s(disposerID);\n    const disposer = this.remove(disposerID);\n    if (disposer) {\n      try {\n        await disposer();\n      } catch (e) {\n        console.error(e);\n      }\n    }\n    try {\n      const disposers = await executor();\n      if (disposers) {\n        this.disposers.set(\n          disposerID,\n          Array.isArray(disposers) ? joinAsyncDisposers(disposers) : disposers\n        );\n      }\n    } catch (e) {\n      console.error(e);\n    }\n    this._e(disposerID);\n    const task = this._n.get(disposerID);\n    if (task) {\n      this._n.delete(disposerID);\n      task();\n    }\n  }\n  /**\n   * Add a disposer directly.\n   * @param disposer a disposer\n   * @param disposerID Optional id for the disposer\n   * @returns disposerID\n   */\n  addDisposer(disposer, disposerID = this.genUID()) {\n    return this.add(() => disposer, disposerID);\n  }\n  /**\n   * Remove but not run the disposer. Do nothing if not found.\n   * @param disposerID\n   */\n  remove(disposerID) {\n    const disposer = this.disposers.get(disposerID);\n    this.disposers.delete(disposerID);\n    return disposer;\n  }\n  /**\n   * Remove and run the disposer. Do nothing if not found.\n   * @param disposerID\n   */\n  flush(disposerID) {\n    if (this._i.has(disposerID)) {\n      this._n.set(disposerID, () => this._f(disposerID));\n    } else {\n      this._f(disposerID);\n    }\n  }\n  async _f(disposerID) {\n    const disposer = this.remove(disposerID);\n    if (disposer) {\n      this._s(disposerID);\n      try {\n        await disposer();\n      } catch (e) {\n        console.error(e);\n      }\n      this._e(disposerID);\n    }\n    const task = this._n.get(disposerID);\n    if (task) {\n      this._n.delete(disposerID);\n      task();\n    }\n  }\n  /**\n   * Remove and run all of the disposers.\n   */\n  flushAll() {\n    this.disposers.forEach((_, disposerID) => this.flush(disposerID));\n  }\n  genUID() {\n    let uid;\n    do {\n      uid = genUID();\n    } while (this.disposers.has(uid));\n    return uid;\n  }\n  _s(disposerID) {\n    this._i.add(disposerID);\n    if (!this._r) {\n      this.finished = new Promise((resolve) => {\n        this._r = resolve;\n      });\n    }\n  }\n  _e(disposerID) {\n    this._i.delete(disposerID);\n    if (this._r && this._i.size <= 0 && this._n.size <= 0) {\n      this._r();\n      this._r = void 0;\n    }\n  }\n};\nfunction joinAsyncDisposers(disposers) {\n  return () => Promise.all(disposers.map(invoke));\n}\n\n// src/disposable.ts\nvar Disposable = class {\n  constructor() {\n    /**\n     * @alias addDisposer\n     * Add a disposer directly.\n     * @param disposer a disposer or a list of disposers\n     */\n    this.push = this.addDisposer;\n    /**\n     * All disposers. Use this only when you know what you are doing.\n     */\n    this.disposers = /* @__PURE__ */ new Set();\n  }\n  /**\n   * Add a disposer directly.\n   * @param disposers a disposer or a list of disposers\n   */\n  addDisposer(disposers) {\n    if (Array.isArray(disposers)) {\n      disposers.forEach((disposer) => {\n        this.disposers.add(disposer);\n      });\n    } else {\n      this.disposers.add(disposers);\n    }\n  }\n  /**\n   * Add a side effect.\n   * @param executor Executes side effect. Return a disposer or a list of disposers. Returns null or false to ignore.\n   */\n  add(executor) {\n    const disposers = executor();\n    if (disposers) {\n      this.push(disposers);\n    }\n  }\n  addEventListener(el, type, listener, options) {\n    el.addEventListener(type, listener, options);\n    const disposer = () => el.removeEventListener(type, listener, options);\n    this.push(disposer);\n    return disposer;\n  }\n  /**\n   * Sugar for setTimeout.\n   * @param handler\n   * @param timeout\n   * @returns ticket\n   */\n  setTimeout(handler, timeout) {\n    const ticket = window.setTimeout(() => {\n      this.remove(disposer);\n      handler();\n    }, timeout);\n    const disposer = () => window.clearTimeout(ticket);\n    this.push(disposer);\n    return disposer;\n  }\n  /**\n   * Sugar for setInterval.\n   * @param handler\n   * @param timeout\n   * @returns ticket\n   */\n  setInterval(handler, timeout) {\n    const ticket = setInterval(handler, timeout);\n    const disposer = () => clearInterval(ticket);\n    this.push(disposer);\n    return disposer;\n  }\n  /**\n   * Remove but not run the disposer. Do nothing if not found.\n   * @param disposer\n   */\n  remove(disposer) {\n    this.disposers.delete(disposer);\n  }\n  /**\n   * Remove and run the disposer. Do nothing if not found.\n   * @param disposer\n   */\n  flush(disposer) {\n    this.remove(disposer);\n    disposer();\n  }\n  /**\n   * Remove and run all of the disposers.\n   */\n  flushAll() {\n    this.disposers.forEach(invoke);\n    this.disposers.clear();\n  }\n};\n\nexport { AsyncSideEffectManager, Disposable, SideEffectManager, genUID, joinAsyncDisposers, joinDisposers };\n","// randomColor by David Merfield under the CC0 license\n// https://github.com/davidmerfield/randomColor/\n\n;(function(root, factory) {\n\n  // Support CommonJS\n  if (typeof exports === 'object') {\n    var randomColor = factory();\n\n    // Support NodeJS & Component, which allow module.exports to be a function\n    if (typeof module === 'object' && module && module.exports) {\n      exports = module.exports = randomColor;\n    }\n\n    // Support CommonJS 1.1.1 spec\n    exports.randomColor = randomColor;\n\n  // Support AMD\n  } else if (typeof define === 'function' && define.amd) {\n    define([], factory);\n\n  // Support vanilla script loading\n  } else {\n    root.randomColor = factory();\n  }\n\n}(this, function() {\n\n  // Seed to get repeatable colors\n  var seed = null;\n\n  // Shared color dictionary\n  var colorDictionary = {};\n\n  // Populate the color dictionary\n  loadColorBounds();\n\n  // check if a range is taken\n  var colorRanges = [];\n\n  var randomColor = function (options) {\n\n    options = options || {};\n\n    // Check if there is a seed and ensure it's an\n    // integer. Otherwise, reset the seed value.\n    if (options.seed !== undefined && options.seed !== null && options.seed === parseInt(options.seed, 10)) {\n      seed = options.seed;\n\n    // A string was passed as a seed\n    } else if (typeof options.seed === 'string') {\n      seed = stringToInteger(options.seed);\n\n    // Something was passed as a seed but it wasn't an integer or string\n    } else if (options.seed !== undefined && options.seed !== null) {\n      throw new TypeError('The seed value must be an integer or string');\n\n    // No seed, reset the value outside.\n    } else {\n      seed = null;\n    }\n\n    var H,S,B;\n\n    // Check if we need to generate multiple colors\n    if (options.count !== null && options.count !== undefined) {\n\n      var totalColors = options.count,\n          colors = [];\n      // Value false at index i means the range i is not taken yet.\n      for (var i = 0; i < options.count; i++) {\n        colorRanges.push(false)\n        }\n      options.count = null;\n\n      while (totalColors > colors.length) {\n\n        var color = randomColor(options);\n\n        if (seed !== null) {\n          options.seed = seed;\n        }\n\n        colors.push(color);\n      }\n\n      options.count = totalColors;\n\n      return colors;\n    }\n\n    // First we pick a hue (H)\n    H = pickHue(options);\n\n    // Then use H to determine saturation (S)\n    S = pickSaturation(H, options);\n\n    // Then use S and H to determine brightness (B).\n    B = pickBrightness(H, S, options);\n\n    // Then we return the HSB color in the desired format\n    return setFormat([H,S,B], options);\n  };\n\n  function pickHue(options) {\n    if (colorRanges.length > 0) {\n      var hueRange = getRealHueRange(options.hue)\n\n      var hue = randomWithin(hueRange)\n\n      //Each of colorRanges.length ranges has a length equal approximatelly one step\n      var step = (hueRange[1] - hueRange[0]) / colorRanges.length\n\n      var j = parseInt((hue - hueRange[0]) / step)\n\n      //Check if the range j is taken\n      if (colorRanges[j] === true) {\n        j = (j + 2) % colorRanges.length\n      }\n      else {\n        colorRanges[j] = true\n           }\n\n      var min = (hueRange[0] + j * step) % 359,\n          max = (hueRange[0] + (j + 1) * step) % 359;\n\n      hueRange = [min, max]\n\n      hue = randomWithin(hueRange)\n\n      if (hue < 0) {hue = 360 + hue;}\n      return hue\n    }\n    else {\n      var hueRange = getHueRange(options.hue)\n\n      hue = randomWithin(hueRange);\n      // Instead of storing red as two seperate ranges,\n      // we group them, using negative numbers\n      if (hue < 0) {\n        hue = 360 + hue;\n      }\n\n      return hue;\n    }\n  }\n\n  function pickSaturation (hue, options) {\n\n    if (options.hue === 'monochrome') {\n      return 0;\n    }\n\n    if (options.luminosity === 'random') {\n      return randomWithin([0,100]);\n    }\n\n    var saturationRange = getSaturationRange(hue);\n\n    var sMin = saturationRange[0],\n        sMax = saturationRange[1];\n\n    switch (options.luminosity) {\n\n      case 'bright':\n        sMin = 55;\n        break;\n\n      case 'dark':\n        sMin = sMax - 10;\n        break;\n\n      case 'light':\n        sMax = 55;\n        break;\n   }\n\n    return randomWithin([sMin, sMax]);\n\n  }\n\n  function pickBrightness (H, S, options) {\n\n    var bMin = getMinimumBrightness(H, S),\n        bMax = 100;\n\n    switch (options.luminosity) {\n\n      case 'dark':\n        bMax = bMin + 20;\n        break;\n\n      case 'light':\n        bMin = (bMax + bMin)/2;\n        break;\n\n      case 'random':\n        bMin = 0;\n        bMax = 100;\n        break;\n    }\n\n    return randomWithin([bMin, bMax]);\n  }\n\n  function setFormat (hsv, options) {\n\n    switch (options.format) {\n\n      case 'hsvArray':\n        return hsv;\n\n      case 'hslArray':\n        return HSVtoHSL(hsv);\n\n      case 'hsl':\n        var hsl = HSVtoHSL(hsv);\n        return 'hsl('+hsl[0]+', '+hsl[1]+'%, '+hsl[2]+'%)';\n\n      case 'hsla':\n        var hslColor = HSVtoHSL(hsv);\n        var alpha = options.alpha || Math.random();\n        return 'hsla('+hslColor[0]+', '+hslColor[1]+'%, '+hslColor[2]+'%, ' + alpha + ')';\n\n      case 'rgbArray':\n        return HSVtoRGB(hsv);\n\n      case 'rgb':\n        var rgb = HSVtoRGB(hsv);\n        return 'rgb(' + rgb.join(', ') + ')';\n\n      case 'rgba':\n        var rgbColor = HSVtoRGB(hsv);\n        var alpha = options.alpha || Math.random();\n        return 'rgba(' + rgbColor.join(', ') + ', ' + alpha + ')';\n\n      default:\n        return HSVtoHex(hsv);\n    }\n\n  }\n\n  function getMinimumBrightness(H, S) {\n\n    var lowerBounds = getColorInfo(H).lowerBounds;\n\n    for (var i = 0; i < lowerBounds.length - 1; i++) {\n\n      var s1 = lowerBounds[i][0],\n          v1 = lowerBounds[i][1];\n\n      var s2 = lowerBounds[i+1][0],\n          v2 = lowerBounds[i+1][1];\n\n      if (S >= s1 && S <= s2) {\n\n         var m = (v2 - v1)/(s2 - s1),\n             b = v1 - m*s1;\n\n         return m*S + b;\n      }\n\n    }\n\n    return 0;\n  }\n\n  function getHueRange (colorInput) {\n\n    if (typeof parseInt(colorInput) === 'number') {\n\n      var number = parseInt(colorInput);\n\n      if (number < 360 && number > 0) {\n        return [number, number];\n      }\n\n    }\n\n    if (typeof colorInput === 'string') {\n\n      if (colorDictionary[colorInput]) {\n        var color = colorDictionary[colorInput];\n        if (color.hueRange) {return color.hueRange;}\n      } else if (colorInput.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)) {\n        var hue = HexToHSB(colorInput)[0];\n        return [ hue, hue ];\n      }\n    }\n\n    return [0,360];\n\n  }\n\n  function getSaturationRange (hue) {\n    return getColorInfo(hue).saturationRange;\n  }\n\n  function getColorInfo (hue) {\n\n    // Maps red colors to make picking hue easier\n    if (hue >= 334 && hue <= 360) {\n      hue-= 360;\n    }\n\n    for (var colorName in colorDictionary) {\n       var color = colorDictionary[colorName];\n       if (color.hueRange &&\n           hue >= color.hueRange[0] &&\n           hue <= color.hueRange[1]) {\n          return colorDictionary[colorName];\n       }\n    } return 'Color not found';\n  }\n\n  function randomWithin (range) {\n    if (seed === null) {\n      //generate random evenly destinct number from : https://martin.ankerl.com/2009/12/09/how-to-create-random-colors-programmatically/\n      var golden_ratio = 0.618033988749895\n      var r=Math.random()\n      r += golden_ratio\n      r %= 1\n      return Math.floor(range[0] + r*(range[1] + 1 - range[0]));\n    } else {\n      //Seeded random algorithm from http://indiegamr.com/generate-repeatable-random-numbers-in-js/\n      var max = range[1] || 1;\n      var min = range[0] || 0;\n      seed = (seed * 9301 + 49297) % 233280;\n      var rnd = seed / 233280.0;\n      return Math.floor(min + rnd * (max - min));\n}\n  }\n\n  function HSVtoHex (hsv){\n\n    var rgb = HSVtoRGB(hsv);\n\n    function componentToHex(c) {\n        var hex = c.toString(16);\n        return hex.length == 1 ? '0' + hex : hex;\n    }\n\n    var hex = '#' + componentToHex(rgb[0]) + componentToHex(rgb[1]) + componentToHex(rgb[2]);\n\n    return hex;\n\n  }\n\n  function defineColor (name, hueRange, lowerBounds) {\n\n    var sMin = lowerBounds[0][0],\n        sMax = lowerBounds[lowerBounds.length - 1][0],\n\n        bMin = lowerBounds[lowerBounds.length - 1][1],\n        bMax = lowerBounds[0][1];\n\n    colorDictionary[name] = {\n      hueRange: hueRange,\n      lowerBounds: lowerBounds,\n      saturationRange: [sMin, sMax],\n      brightnessRange: [bMin, bMax]\n    };\n\n  }\n\n  function loadColorBounds () {\n\n    defineColor(\n      'monochrome',\n      null,\n      [[0,0],[100,0]]\n    );\n\n    defineColor(\n      'red',\n      [-26,18],\n      [[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]\n    );\n\n    defineColor(\n      'orange',\n      [18,46],\n      [[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]\n    );\n\n    defineColor(\n      'yellow',\n      [46,62],\n      [[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]\n    );\n\n    defineColor(\n      'green',\n      [62,178],\n      [[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]\n    );\n\n    defineColor(\n      'blue',\n      [178, 257],\n      [[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]\n    );\n\n    defineColor(\n      'purple',\n      [257, 282],\n      [[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]\n    );\n\n    defineColor(\n      'pink',\n      [282, 334],\n      [[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]\n    );\n\n  }\n\n  function HSVtoRGB (hsv) {\n\n    // this doesn't work for the values of 0 and 360\n    // here's the hacky fix\n    var h = hsv[0];\n    if (h === 0) {h = 1;}\n    if (h === 360) {h = 359;}\n\n    // Rebase the h,s,v values\n    h = h/360;\n    var s = hsv[1]/100,\n        v = hsv[2]/100;\n\n    var h_i = Math.floor(h*6),\n      f = h * 6 - h_i,\n      p = v * (1 - s),\n      q = v * (1 - f*s),\n      t = v * (1 - (1 - f)*s),\n      r = 256,\n      g = 256,\n      b = 256;\n\n    switch(h_i) {\n      case 0: r = v; g = t; b = p;  break;\n      case 1: r = q; g = v; b = p;  break;\n      case 2: r = p; g = v; b = t;  break;\n      case 3: r = p; g = q; b = v;  break;\n      case 4: r = t; g = p; b = v;  break;\n      case 5: r = v; g = p; b = q;  break;\n    }\n\n    var result = [Math.floor(r*255), Math.floor(g*255), Math.floor(b*255)];\n    return result;\n  }\n\n  function HexToHSB (hex) {\n    hex = hex.replace(/^#/, '');\n    hex = hex.length === 3 ? hex.replace(/(.)/g, '$1$1') : hex;\n\n    var red = parseInt(hex.substr(0, 2), 16) / 255,\n          green = parseInt(hex.substr(2, 2), 16) / 255,\n          blue = parseInt(hex.substr(4, 2), 16) / 255;\n\n    var cMax = Math.max(red, green, blue),\n          delta = cMax - Math.min(red, green, blue),\n          saturation = cMax ? (delta / cMax) : 0;\n\n    switch (cMax) {\n      case red: return [ 60 * (((green - blue) / delta) % 6) || 0, saturation, cMax ];\n      case green: return [ 60 * (((blue - red) / delta) + 2) || 0, saturation, cMax ];\n      case blue: return [ 60 * (((red - green) / delta) + 4) || 0, saturation, cMax ];\n    }\n  }\n\n  function HSVtoHSL (hsv) {\n    var h = hsv[0],\n      s = hsv[1]/100,\n      v = hsv[2]/100,\n      k = (2-s)*v;\n\n    return [\n      h,\n      Math.round(s*v / (k<1 ? k : 2-k) * 10000) / 100,\n      k/2 * 100\n    ];\n  }\n\n  function stringToInteger (string) {\n    var total = 0\n    for (var i = 0; i !== string.length; i++) {\n      if (total >= Number.MAX_SAFE_INTEGER) break;\n      total += string.charCodeAt(i)\n    }\n    return total\n  }\n\n  // get The range of given hue when options.count!=0\n  function getRealHueRange(colorHue)\n  { if (!isNaN(colorHue)) {\n    var number = parseInt(colorHue);\n\n    if (number < 360 && number > 0) {\n      return getColorInfo(colorHue).hueRange\n    }\n  }\n    else if (typeof colorHue === 'string') {\n\n      if (colorDictionary[colorHue]) {\n        var color = colorDictionary[colorHue];\n\n        if (color.hueRange) {\n          return color.hueRange\n       }\n    } else if (colorHue.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)) {\n        var hue = HexToHSB(colorHue)[0]\n        return getColorInfo(hue).hueRange\n    }\n  }\n\n    return [0,360]\n}\n  return randomColor;\n}));\n","import randomColor from \"randomcolor\";\nexport class Logger {\n    kind;\n    debug;\n    color = randomColor({ luminosity: \"dark\" });\n    constructor(kind = \"NetlessApp\", debug = import.meta.env.DEV || \"error\") {\n        this.kind = kind;\n        this.debug = debug;\n    }\n    log(...messages) {\n        if (this.debug === true || this.debug === \"log\") {\n            return this._log(\"log\", messages);\n        }\n    }\n    warn(...messages) {\n        if (this.debug && this.debug !== \"error\") {\n            return this._log(\"warn\", messages);\n        }\n    }\n    error(...messages) {\n        if (this.debug) {\n            return this._log(\"error\", messages);\n        }\n    }\n    _log(type, messages) {\n        console[type](`%c[${this.kind}]:`, `color: ${this.color}; font-weight: bold;`, ...messages);\n    }\n}\n//# sourceMappingURL=logger.js.map","import type { AppContext } from \"@netless/window-manager\";\n\nexport interface UserPayload {\n  memberId: number;\n  uid: string;\n  userId: string;\n  nickName: string;\n  cursorName: string;\n}\n\nexport function getUserPayload(context: AppContext): UserPayload {\n  const room = context.getRoom();\n  const displayer = context.getDisplayer();\n  const memberId = displayer.observerId;\n  const userPayload = displayer.state.roomMembers.find(\n    member => member.memberId === memberId\n  )?.payload;\n  const uid = userPayload?.uid || room?.uid || \"\";\n  const nickName = userPayload?.nickName || uid;\n  const userId = userPayload?.userId || uid;\n  const cursorName = userPayload?.cursorName || nickName || \"\";\n  return { memberId, uid, userId, nickName, cursorName };\n}\n\n// from @polka/url (https://github.com/lukeed/polka, MIT license)\nexport function parse(url: string) {\n  const index = url.indexOf(\"?\", 1);\n  if (index !== -1) {\n    return {\n      search: url.slice(index),\n      pathname: url.slice(0, index),\n    };\n  }\n  return {\n    search: \"\",\n    pathname: url,\n  };\n}\n\nexport function appendQuery(url: string, query: string) {\n  const { pathname, search } = parse(url);\n  return pathname + (search ? `${search}&` : \"?\") + query;\n}\n\nexport function element<T extends keyof HTMLElementTagNameMap>(tag: T) {\n  return document.createElement(tag);\n}\n\nexport function attr(el: HTMLElement, key: string, value: string | null) {\n  if (value == null) {\n    el.removeAttribute(key);\n  } else {\n    el.setAttribute(key, value);\n  }\n}\n\nexport function append(el: HTMLElement, node: HTMLElement) {\n  return el.appendChild(node);\n}\n\nexport function detach(el: HTMLElement) {\n  return el.parentNode?.removeChild(el);\n}\n\nexport function noop() {\n  // noop\n}\n\nexport const nextTick = /* @__PURE__ */ Promise.resolve();\n\nexport function writable<T>(value: T) {\n  const listeners: Array<(value: T) => void> = [];\n\n  return {\n    get value() {\n      return value;\n    },\n    set(newValue: T) {\n      value = newValue;\n      listeners.forEach(listener => listener(value));\n    },\n    subscribe(listener: (value: T) => void) {\n      listeners.push(listener);\n      nextTick.then(() => listener(value));\n      return () => {\n        listeners.splice(listeners.indexOf(listener), 1);\n      };\n    },\n  };\n}\n","var resizeObservers = [];\nexport { resizeObservers };\n","import { resizeObservers } from '../utils/resizeObservers';\nvar hasActiveObservations = function () {\n    return resizeObservers.some(function (ro) { return ro.activeTargets.length > 0; });\n};\nexport { hasActiveObservations };\n","import { resizeObservers } from '../utils/resizeObservers';\nvar hasSkippedObservations = function () {\n    return resizeObservers.some(function (ro) { return ro.skippedTargets.length > 0; });\n};\nexport { hasSkippedObservations };\n","var msg = 'ResizeObserver loop completed with undelivered notifications.';\nvar deliverResizeLoopError = function () {\n    var event;\n    if (typeof ErrorEvent === 'function') {\n        event = new ErrorEvent('error', {\n            message: msg\n        });\n    }\n    else {\n        event = document.createEvent('Event');\n        event.initEvent('error', false, false);\n        event.message = msg;\n    }\n    window.dispatchEvent(event);\n};\nexport { deliverResizeLoopError };\n","var ResizeObserverBoxOptions;\n(function (ResizeObserverBoxOptions) {\n    ResizeObserverBoxOptions[\"BORDER_BOX\"] = \"border-box\";\n    ResizeObserverBoxOptions[\"CONTENT_BOX\"] = \"content-box\";\n    ResizeObserverBoxOptions[\"DEVICE_PIXEL_CONTENT_BOX\"] = \"device-pixel-content-box\";\n})(ResizeObserverBoxOptions || (ResizeObserverBoxOptions = {}));\nexport { ResizeObserverBoxOptions };\n","export var freeze = function (obj) { return Object.freeze(obj); };\n","import { freeze } from './utils/freeze';\nvar ResizeObserverSize = (function () {\n    function ResizeObserverSize(inlineSize, blockSize) {\n        this.inlineSize = inlineSize;\n        this.blockSize = blockSize;\n        freeze(this);\n    }\n    return ResizeObserverSize;\n}());\nexport { ResizeObserverSize };\n","import { freeze } from './utils/freeze';\nvar DOMRectReadOnly = (function () {\n    function DOMRectReadOnly(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.top = this.y;\n        this.left = this.x;\n        this.bottom = this.top + this.height;\n        this.right = this.left + this.width;\n        return freeze(this);\n    }\n    DOMRectReadOnly.prototype.toJSON = function () {\n        var _a = this, x = _a.x, y = _a.y, top = _a.top, right = _a.right, bottom = _a.bottom, left = _a.left, width = _a.width, height = _a.height;\n        return { x: x, y: y, top: top, right: right, bottom: bottom, left: left, width: width, height: height };\n    };\n    DOMRectReadOnly.fromRect = function (rectangle) {\n        return new DOMRectReadOnly(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n    };\n    return DOMRectReadOnly;\n}());\nexport { DOMRectReadOnly };\n","var isSVG = function (target) { return target instanceof SVGElement && 'getBBox' in target; };\nvar isHidden = function (target) {\n    if (isSVG(target)) {\n        var _a = target.getBBox(), width = _a.width, height = _a.height;\n        return !width && !height;\n    }\n    var _b = target, offsetWidth = _b.offsetWidth, offsetHeight = _b.offsetHeight;\n    return !(offsetWidth || offsetHeight || target.getClientRects().length);\n};\nvar isElement = function (obj) {\n    var _a;\n    if (obj instanceof Element) {\n        return true;\n    }\n    var scope = (_a = obj === null || obj === void 0 ? void 0 : obj.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView;\n    return !!(scope && obj instanceof scope.Element);\n};\nvar isReplacedElement = function (target) {\n    switch (target.tagName) {\n        case 'INPUT':\n            if (target.type !== 'image') {\n                break;\n            }\n        case 'VIDEO':\n        case 'AUDIO':\n        case 'EMBED':\n        case 'OBJECT':\n        case 'CANVAS':\n        case 'IFRAME':\n        case 'IMG':\n            return true;\n    }\n    return false;\n};\nexport { isSVG, isHidden, isElement, isReplacedElement };\n","export var global = typeof window !== 'undefined' ? window : {};\n","import { ResizeObserverBoxOptions } from '../ResizeObserverBoxOptions';\nimport { ResizeObserverSize } from '../ResizeObserverSize';\nimport { DOMRectReadOnly } from '../DOMRectReadOnly';\nimport { isSVG, isHidden } from '../utils/element';\nimport { freeze } from '../utils/freeze';\nimport { global } from '../utils/global';\nvar cache = new WeakMap();\nvar scrollRegexp = /auto|scroll/;\nvar verticalRegexp = /^tb|vertical/;\nvar IE = (/msie|trident/i).test(global.navigator && global.navigator.userAgent);\nvar parseDimension = function (pixel) { return parseFloat(pixel || '0'); };\nvar size = function (inlineSize, blockSize, switchSizes) {\n    if (inlineSize === void 0) { inlineSize = 0; }\n    if (blockSize === void 0) { blockSize = 0; }\n    if (switchSizes === void 0) { switchSizes = false; }\n    return new ResizeObserverSize((switchSizes ? blockSize : inlineSize) || 0, (switchSizes ? inlineSize : blockSize) || 0);\n};\nvar zeroBoxes = freeze({\n    devicePixelContentBoxSize: size(),\n    borderBoxSize: size(),\n    contentBoxSize: size(),\n    contentRect: new DOMRectReadOnly(0, 0, 0, 0)\n});\nvar calculateBoxSizes = function (target, forceRecalculation) {\n    if (forceRecalculation === void 0) { forceRecalculation = false; }\n    if (cache.has(target) && !forceRecalculation) {\n        return cache.get(target);\n    }\n    if (isHidden(target)) {\n        cache.set(target, zeroBoxes);\n        return zeroBoxes;\n    }\n    var cs = getComputedStyle(target);\n    var svg = isSVG(target) && target.ownerSVGElement && target.getBBox();\n    var removePadding = !IE && cs.boxSizing === 'border-box';\n    var switchSizes = verticalRegexp.test(cs.writingMode || '');\n    var canScrollVertically = !svg && scrollRegexp.test(cs.overflowY || '');\n    var canScrollHorizontally = !svg && scrollRegexp.test(cs.overflowX || '');\n    var paddingTop = svg ? 0 : parseDimension(cs.paddingTop);\n    var paddingRight = svg ? 0 : parseDimension(cs.paddingRight);\n    var paddingBottom = svg ? 0 : parseDimension(cs.paddingBottom);\n    var paddingLeft = svg ? 0 : parseDimension(cs.paddingLeft);\n    var borderTop = svg ? 0 : parseDimension(cs.borderTopWidth);\n    var borderRight = svg ? 0 : parseDimension(cs.borderRightWidth);\n    var borderBottom = svg ? 0 : parseDimension(cs.borderBottomWidth);\n    var borderLeft = svg ? 0 : parseDimension(cs.borderLeftWidth);\n    var horizontalPadding = paddingLeft + paddingRight;\n    var verticalPadding = paddingTop + paddingBottom;\n    var horizontalBorderArea = borderLeft + borderRight;\n    var verticalBorderArea = borderTop + borderBottom;\n    var horizontalScrollbarThickness = !canScrollHorizontally ? 0 : target.offsetHeight - verticalBorderArea - target.clientHeight;\n    var verticalScrollbarThickness = !canScrollVertically ? 0 : target.offsetWidth - horizontalBorderArea - target.clientWidth;\n    var widthReduction = removePadding ? horizontalPadding + horizontalBorderArea : 0;\n    var heightReduction = removePadding ? verticalPadding + verticalBorderArea : 0;\n    var contentWidth = svg ? svg.width : parseDimension(cs.width) - widthReduction - verticalScrollbarThickness;\n    var contentHeight = svg ? svg.height : parseDimension(cs.height) - heightReduction - horizontalScrollbarThickness;\n    var borderBoxWidth = contentWidth + horizontalPadding + verticalScrollbarThickness + horizontalBorderArea;\n    var borderBoxHeight = contentHeight + verticalPadding + horizontalScrollbarThickness + verticalBorderArea;\n    var boxes = freeze({\n        devicePixelContentBoxSize: size(Math.round(contentWidth * devicePixelRatio), Math.round(contentHeight * devicePixelRatio), switchSizes),\n        borderBoxSize: size(borderBoxWidth, borderBoxHeight, switchSizes),\n        contentBoxSize: size(contentWidth, contentHeight, switchSizes),\n        contentRect: new DOMRectReadOnly(paddingLeft, paddingTop, contentWidth, contentHeight)\n    });\n    cache.set(target, boxes);\n    return boxes;\n};\nvar calculateBoxSize = function (target, observedBox, forceRecalculation) {\n    var _a = calculateBoxSizes(target, forceRecalculation), borderBoxSize = _a.borderBoxSize, contentBoxSize = _a.contentBoxSize, devicePixelContentBoxSize = _a.devicePixelContentBoxSize;\n    switch (observedBox) {\n        case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:\n            return devicePixelContentBoxSize;\n        case ResizeObserverBoxOptions.BORDER_BOX:\n            return borderBoxSize;\n        default:\n            return contentBoxSize;\n    }\n};\nexport { calculateBoxSize, calculateBoxSizes };\n","import { calculateBoxSizes } from './algorithms/calculateBoxSize';\nimport { freeze } from './utils/freeze';\nvar ResizeObserverEntry = (function () {\n    function ResizeObserverEntry(target) {\n        var boxes = calculateBoxSizes(target);\n        this.target = target;\n        this.contentRect = boxes.contentRect;\n        this.borderBoxSize = freeze([boxes.borderBoxSize]);\n        this.contentBoxSize = freeze([boxes.contentBoxSize]);\n        this.devicePixelContentBoxSize = freeze([boxes.devicePixelContentBoxSize]);\n    }\n    return ResizeObserverEntry;\n}());\nexport { ResizeObserverEntry };\n","import { isHidden } from '../utils/element';\nvar calculateDepthForNode = function (node) {\n    if (isHidden(node)) {\n        return Infinity;\n    }\n    var depth = 0;\n    var parent = node.parentNode;\n    while (parent) {\n        depth += 1;\n        parent = parent.parentNode;\n    }\n    return depth;\n};\nexport { calculateDepthForNode };\n","import { resizeObservers } from '../utils/resizeObservers';\nimport { ResizeObserverEntry } from '../ResizeObserverEntry';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nimport { calculateBoxSize } from './calculateBoxSize';\nvar broadcastActiveObservations = function () {\n    var shallowestDepth = Infinity;\n    var callbacks = [];\n    resizeObservers.forEach(function processObserver(ro) {\n        if (ro.activeTargets.length === 0) {\n            return;\n        }\n        var entries = [];\n        ro.activeTargets.forEach(function processTarget(ot) {\n            var entry = new ResizeObserverEntry(ot.target);\n            var targetDepth = calculateDepthForNode(ot.target);\n            entries.push(entry);\n            ot.lastReportedSize = calculateBoxSize(ot.target, ot.observedBox);\n            if (targetDepth < shallowestDepth) {\n                shallowestDepth = targetDepth;\n            }\n        });\n        callbacks.push(function resizeObserverCallback() {\n            ro.callback.call(ro.observer, entries, ro.observer);\n        });\n        ro.activeTargets.splice(0, ro.activeTargets.length);\n    });\n    for (var _i = 0, callbacks_1 = callbacks; _i < callbacks_1.length; _i++) {\n        var callback = callbacks_1[_i];\n        callback();\n    }\n    return shallowestDepth;\n};\nexport { broadcastActiveObservations };\n","import { resizeObservers } from '../utils/resizeObservers';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nvar gatherActiveObservationsAtDepth = function (depth) {\n    resizeObservers.forEach(function processObserver(ro) {\n        ro.activeTargets.splice(0, ro.activeTargets.length);\n        ro.skippedTargets.splice(0, ro.skippedTargets.length);\n        ro.observationTargets.forEach(function processTarget(ot) {\n            if (ot.isActive()) {\n                if (calculateDepthForNode(ot.target) > depth) {\n                    ro.activeTargets.push(ot);\n                }\n                else {\n                    ro.skippedTargets.push(ot);\n                }\n            }\n        });\n    });\n};\nexport { gatherActiveObservationsAtDepth };\n","import { hasActiveObservations } from '../algorithms/hasActiveObservations';\nimport { hasSkippedObservations } from '../algorithms/hasSkippedObservations';\nimport { deliverResizeLoopError } from '../algorithms/deliverResizeLoopError';\nimport { broadcastActiveObservations } from '../algorithms/broadcastActiveObservations';\nimport { gatherActiveObservationsAtDepth } from '../algorithms/gatherActiveObservationsAtDepth';\nvar process = function () {\n    var depth = 0;\n    gatherActiveObservationsAtDepth(depth);\n    while (hasActiveObservations()) {\n        depth = broadcastActiveObservations();\n        gatherActiveObservationsAtDepth(depth);\n    }\n    if (hasSkippedObservations()) {\n        deliverResizeLoopError();\n    }\n    return depth > 0;\n};\nexport { process };\n","var trigger;\nvar callbacks = [];\nvar notify = function () { return callbacks.splice(0).forEach(function (cb) { return cb(); }); };\nvar queueMicroTask = function (callback) {\n    if (!trigger) {\n        var toggle_1 = 0;\n        var el_1 = document.createTextNode('');\n        var config = { characterData: true };\n        new MutationObserver(function () { return notify(); }).observe(el_1, config);\n        trigger = function () { el_1.textContent = \"\".concat(toggle_1 ? toggle_1-- : toggle_1++); };\n    }\n    callbacks.push(callback);\n    trigger();\n};\nexport { queueMicroTask };\n","import { queueMicroTask } from './queueMicroTask';\nvar queueResizeObserver = function (cb) {\n    queueMicroTask(function ResizeObserver() {\n        requestAnimationFrame(cb);\n    });\n};\nexport { queueResizeObserver };\n","import { process } from './process';\nimport { global } from './global';\nimport { queueResizeObserver } from './queueResizeObserver';\nvar watching = 0;\nvar isWatching = function () { return !!watching; };\nvar CATCH_PERIOD = 250;\nvar observerConfig = { attributes: true, characterData: true, childList: true, subtree: true };\nvar events = [\n    'resize',\n    'load',\n    'transitionend',\n    'animationend',\n    'animationstart',\n    'animationiteration',\n    'keyup',\n    'keydown',\n    'mouseup',\n    'mousedown',\n    'mouseover',\n    'mouseout',\n    'blur',\n    'focus'\n];\nvar time = function (timeout) {\n    if (timeout === void 0) { timeout = 0; }\n    return Date.now() + timeout;\n};\nvar scheduled = false;\nvar Scheduler = (function () {\n    function Scheduler() {\n        var _this = this;\n        this.stopped = true;\n        this.listener = function () { return _this.schedule(); };\n    }\n    Scheduler.prototype.run = function (timeout) {\n        var _this = this;\n        if (timeout === void 0) { timeout = CATCH_PERIOD; }\n        if (scheduled) {\n            return;\n        }\n        scheduled = true;\n        var until = time(timeout);\n        queueResizeObserver(function () {\n            var elementsHaveResized = false;\n            try {\n                elementsHaveResized = process();\n            }\n            finally {\n                scheduled = false;\n                timeout = until - time();\n                if (!isWatching()) {\n                    return;\n                }\n                if (elementsHaveResized) {\n                    _this.run(1000);\n                }\n                else if (timeout > 0) {\n                    _this.run(timeout);\n                }\n                else {\n                    _this.start();\n                }\n            }\n        });\n    };\n    Scheduler.prototype.schedule = function () {\n        this.stop();\n        this.run();\n    };\n    Scheduler.prototype.observe = function () {\n        var _this = this;\n        var cb = function () { return _this.observer && _this.observer.observe(document.body, observerConfig); };\n        document.body ? cb() : global.addEventListener('DOMContentLoaded', cb);\n    };\n    Scheduler.prototype.start = function () {\n        var _this = this;\n        if (this.stopped) {\n            this.stopped = false;\n            this.observer = new MutationObserver(this.listener);\n            this.observe();\n            events.forEach(function (name) { return global.addEventListener(name, _this.listener, true); });\n        }\n    };\n    Scheduler.prototype.stop = function () {\n        var _this = this;\n        if (!this.stopped) {\n            this.observer && this.observer.disconnect();\n            events.forEach(function (name) { return global.removeEventListener(name, _this.listener, true); });\n            this.stopped = true;\n        }\n    };\n    return Scheduler;\n}());\nvar scheduler = new Scheduler();\nvar updateCount = function (n) {\n    !watching && n > 0 && scheduler.start();\n    watching += n;\n    !watching && scheduler.stop();\n};\nexport { scheduler, updateCount };\n","import { ResizeObserverBoxOptions } from './ResizeObserverBoxOptions';\nimport { calculateBoxSize } from './algorithms/calculateBoxSize';\nimport { isSVG, isReplacedElement } from './utils/element';\nvar skipNotifyOnElement = function (target) {\n    return !isSVG(target)\n        && !isReplacedElement(target)\n        && getComputedStyle(target).display === 'inline';\n};\nvar ResizeObservation = (function () {\n    function ResizeObservation(target, observedBox) {\n        this.target = target;\n        this.observedBox = observedBox || ResizeObserverBoxOptions.CONTENT_BOX;\n        this.lastReportedSize = {\n            inlineSize: 0,\n            blockSize: 0\n        };\n    }\n    ResizeObservation.prototype.isActive = function () {\n        var size = calculateBoxSize(this.target, this.observedBox, true);\n        if (skipNotifyOnElement(this.target)) {\n            this.lastReportedSize = size;\n        }\n        if (this.lastReportedSize.inlineSize !== size.inlineSize\n            || this.lastReportedSize.blockSize !== size.blockSize) {\n            return true;\n        }\n        return false;\n    };\n    return ResizeObservation;\n}());\nexport { ResizeObservation };\n","var ResizeObserverDetail = (function () {\n    function ResizeObserverDetail(resizeObserver, callback) {\n        this.activeTargets = [];\n        this.skippedTargets = [];\n        this.observationTargets = [];\n        this.observer = resizeObserver;\n        this.callback = callback;\n    }\n    return ResizeObserverDetail;\n}());\nexport { ResizeObserverDetail };\n","import { scheduler, updateCount } from './utils/scheduler';\nimport { ResizeObservation } from './ResizeObservation';\nimport { ResizeObserverDetail } from './ResizeObserverDetail';\nimport { resizeObservers } from './utils/resizeObservers';\nvar observerMap = new WeakMap();\nvar getObservationIndex = function (observationTargets, target) {\n    for (var i = 0; i < observationTargets.length; i += 1) {\n        if (observationTargets[i].target === target) {\n            return i;\n        }\n    }\n    return -1;\n};\nvar ResizeObserverController = (function () {\n    function ResizeObserverController() {\n    }\n    ResizeObserverController.connect = function (resizeObserver, callback) {\n        var detail = new ResizeObserverDetail(resizeObserver, callback);\n        observerMap.set(resizeObserver, detail);\n    };\n    ResizeObserverController.observe = function (resizeObserver, target, options) {\n        var detail = observerMap.get(resizeObserver);\n        var firstObservation = detail.observationTargets.length === 0;\n        if (getObservationIndex(detail.observationTargets, target) < 0) {\n            firstObservation && resizeObservers.push(detail);\n            detail.observationTargets.push(new ResizeObservation(target, options && options.box));\n            updateCount(1);\n            scheduler.schedule();\n        }\n    };\n    ResizeObserverController.unobserve = function (resizeObserver, target) {\n        var detail = observerMap.get(resizeObserver);\n        var index = getObservationIndex(detail.observationTargets, target);\n        var lastObservation = detail.observationTargets.length === 1;\n        if (index >= 0) {\n            lastObservation && resizeObservers.splice(resizeObservers.indexOf(detail), 1);\n            detail.observationTargets.splice(index, 1);\n            updateCount(-1);\n        }\n    };\n    ResizeObserverController.disconnect = function (resizeObserver) {\n        var _this = this;\n        var detail = observerMap.get(resizeObserver);\n        detail.observationTargets.slice().forEach(function (ot) { return _this.unobserve(resizeObserver, ot.target); });\n        detail.activeTargets.splice(0, detail.activeTargets.length);\n    };\n    return ResizeObserverController;\n}());\nexport { ResizeObserverController };\n","import { ResizeObserverController } from './ResizeObserverController';\nimport { isElement } from './utils/element';\nvar ResizeObserver = (function () {\n    function ResizeObserver(callback) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (typeof callback !== 'function') {\n            throw new TypeError(\"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.\");\n        }\n        ResizeObserverController.connect(this, callback);\n    }\n    ResizeObserver.prototype.observe = function (target, options) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (!isElement(target)) {\n            throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n        }\n        ResizeObserverController.observe(this, target, options);\n    };\n    ResizeObserver.prototype.unobserve = function (target) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (!isElement(target)) {\n            throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n        }\n        ResizeObserverController.unobserve(this, target);\n    };\n    ResizeObserver.prototype.disconnect = function () {\n        ResizeObserverController.disconnect(this);\n    };\n    ResizeObserver.toString = function () {\n        return 'function ResizeObserver () { [polyfill code] }';\n    };\n    return ResizeObserver;\n}());\nexport { ResizeObserver };\n","import type { AppContext, ReadonlyTeleBox } from \"@netless/window-manager\";\nimport { SideEffectManager } from \"side-effect-manager\";\nimport { ResizeObserver as Polyfill } from \"@juggle/resize-observer\";\nimport { append, attr, detach, element, writable } from \"./utils\";\nimport styles from \"./style.css?inline\";\n\nconst ResizeObserver = window.ResizeObserver || Polyfill;\n\nexport class Renderer {\n  readonly sideEffect = new SideEffectManager();\n  readonly box: ReadonlyTeleBox;\n  readonly role = writable<0 | 2>(2);\n  readonly ratio = writable(16 / 9);\n  readonly $content = element(\"div\");\n  readonly $iframe = element(\"iframe\");\n\n  constructor(public readonly context: AppContext) {\n    this.box = context.getBox();\n    attr(this.$content, \"class\", \"app-talkative-container\");\n    append(this.$content, this.$iframe);\n    this.$content.dataset.appKind = \"Talkative\";\n  }\n\n  private _on_update_role(role: 0 | 2) {\n    this.$content.dataset.role = String(role);\n    this.$content.classList.toggle(\"owner\", role === 0);\n  }\n\n  private _on_update_ratio(ratio: number, entry?: ResizeObserverEntry) {\n    const { width, height } = entry ? entry.contentRect : this.$content.getBoundingClientRect();\n    if (width / ratio > height) {\n      // const targetWidth = height * ratio;\n      // this.$iframe.style.width = `${targetWidth}px`;\n      this.$iframe.style.height = \"\";\n    } else if (width / ratio < height) {\n      // const targetHeight = width / ratio;\n      this.$iframe.style.width = \"\";\n      // this.$iframe.style.height = `${targetHeight}px`;\n    }\n  }\n\n  private _observe_content_resize() {\n    const observer = new ResizeObserver(entries => {\n      this._on_update_ratio(this.ratio.value, entries[0]);\n    });\n    observer.observe(this.$content);\n    return observer.disconnect.bind(observer);\n  }\n\n  mount() {\n    this.box.mountStyles(styles);\n    this.box.mountContent(this.$content);\n\n    this.sideEffect.addDisposer(this.role.subscribe(this._on_update_role.bind(this)));\n    this.sideEffect.addDisposer(this.ratio.subscribe(this._on_update_ratio.bind(this)));\n    this.sideEffect.addDisposer(this._observe_content_resize());\n\n    return this.destroy.bind(this);\n  }\n\n  destroy() {\n    this.sideEffect.flushAll();\n\n    detach(this.$content);\n  }\n\n  postMessage(message: unknown) {\n    console.log(message);\n    this.$iframe.contentWindow?.postMessage(message, \"*\");\n  }\n}\n","export function arrowLeftSVG(namespace: string): SVGElement {\n  const NS = \"http://www.w3.org/2000/svg\";\n\n  const $svg = document.createElementNS(NS, \"svg\");\n  $svg.setAttribute(\"class\", `${namespace}-footer-icon-arrow-left`);\n  $svg.setAttribute(\"viewBox\", \"0 0 20 20\");\n\n  $svg.innerHTML = `<g clip-path=\"url(#clip0_11800_99864)\">\n<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M11.5283 4.86182L12.4711 5.80463L8.22849 10.0473L12.4711 14.2899L11.5283 15.2327L6.34287 10.0473L11.5283 4.86182Z\" class=\"arrow\" />\n</g>\n<defs>\n<clipPath id=\"clip0_11800_99864\">\n<rect width=\"16\" height=\"16\" fill=\"white\" transform=\"translate(2 2)\"/>\n</clipPath>\n</defs>`;\n\n  return $svg;\n}\n","export function arrowRightSVG(namespace: string): SVGElement {\n  const NS = \"http://www.w3.org/2000/svg\";\n\n  const $svg = document.createElementNS(NS, \"svg\");\n  $svg.setAttribute(\"class\", `${namespace}-footer-icon-arrow-right`);\n  $svg.setAttribute(\"viewBox\", \"0 0 20 20\");\n\n  $svg.innerHTML = `<g clip-path=\"url(#clip0_11800_99870)\">\n<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.1377 4.86182L7.19489 5.80463L11.4375 10.0473L7.19489 14.2899L8.1377 15.2327L13.3231 10.0473L8.1377 4.86182Z\" class=\"arrow\" />\n</g>\n<defs>\n<clipPath id=\"clip0_11800_99870\">\n<rect width=\"16\" height=\"16\" fill=\"white\" transform=\"translate(2 2)\"/>\n</clipPath>\n</defs>`;\n\n  return $svg;\n}\n","import type { AppContext, ReadonlyTeleBox } from \"@netless/window-manager\";\nimport { SideEffectManager } from \"side-effect-manager\";\nimport { append, attr, detach, element, writable } from \"./utils\";\nimport { arrowLeftSVG } from \"./icons/arrow-left\";\nimport { arrowRightSVG } from \"./icons/arrow-right\";\n\nexport class Footer {\n  readonly sideEffect = new SideEffectManager();\n  readonly box: ReadonlyTeleBox;\n  readonly role = writable<0 | 2>(2);\n  readonly text = writable(\"...\");\n  readonly $footer = element(\"div\");\n  readonly $btnLeft = element(\"button\");\n  readonly $btnRight = element(\"button\");\n  readonly $span = element(\"span\");\n\n  constructor(\n    readonly context: AppContext,\n    readonly onPrev: () => void,\n    readonly onNext: () => void\n  ) {\n    this.box = context.getBox();\n    append(this.$footer, this.$btnLeft);\n    append(this.$footer, this.$span);\n    append(this.$footer, this.$btnRight);\n    attr(this.$footer, \"class\", \"app-talkative-footer\");\n    attr(this.$btnLeft, \"class\", \"app-talkative-btn app-talkative-btn-left\");\n    attr(this.$btnRight, \"class\", \"app-talkative-btn app-talkative-btn-right\");\n    attr(this.$span, \"class\", \"app-talkative-page\");\n    this.$btnLeft.appendChild(arrowLeftSVG(\"app-talkative\"));\n    this.$btnRight.appendChild(arrowRightSVG(\"app-talkative\"));\n    this.$btnLeft.addEventListener(\"click\", this.onPrev);\n    this.$btnRight.addEventListener(\"click\", this.onNext);\n  }\n\n  private _on_update_role(role: 0 | 2) {\n    this.$btnLeft.disabled = role === 2;\n    this.$btnRight.disabled = role === 2;\n    this.$footer.classList.toggle(\"owner\", role === 0);\n  }\n\n  private _on_update_text(text: string) {\n    this.$span.textContent = text;\n  }\n\n  mount() {\n    this.box.mountFooter(this.$footer);\n\n    this.sideEffect.addDisposer(this.role.subscribe(this._on_update_role.bind(this)));\n    this.sideEffect.addDisposer(this.text.subscribe(this._on_update_text.bind(this)));\n\n    return this.destroy.bind(this);\n  }\n\n  destroy() {\n    this.sideEffect.flushAll();\n\n    detach(this.$footer);\n  }\n}\n","import type { Logger } from \"@netless/app-shared\";\nimport type { AppContext } from \"@netless/window-manager\";\nimport type { TalkativeAttributes, MagixEventPayloads } from \"./index\";\nimport { SideEffectManager } from \"side-effect-manager\";\n\nexport interface ConnectParams {\n  context: AppContext<TalkativeAttributes, MagixEventPayloads>;\n  logger: Logger;\n  postMessage: (message: string) => void;\n  onRatioChanged: (ratio: number) => void;\n  isSentBySelf: (source: MessageEventSource | null) => boolean;\n  onLocalMessage?: (appId: string, event: Record<string, unknown>) => void;\n}\n\nexport function connect({ context, logger, ...callbacks }: ConnectParams): () => void {\n  const sideEffect = new SideEffectManager();\n\n  const handlers = {\n    onPagenum({ totalPages }: { totalPages: number }) {\n      if (context.getIsWritable() && totalPages) {\n        context.storage.setState({ pageNum: totalPages });\n      }\n    },\n\n    onLoadComplete(data: { totalPages?: number; coursewareRatio: number }) {\n      callbacks.onRatioChanged(data.coursewareRatio);\n\n      if (context.getIsWritable() && data.totalPages) {\n        context.storage.setState({ pageNum: data.totalPages });\n      }\n\n      // send last message to sync state\n      const { page, lastMsg } = context.storage.state;\n      lastMsg && callbacks.postMessage(lastMsg);\n\n      // send first page jump message\n      callbacks.postMessage(JSON.stringify({ method: \"onJumpPage\", toPage: page }));\n    },\n    onLocalMessage(event: Record<string, unknown>) {\n      if (context.getIsWritable()) {\n        callbacks?.onLocalMessage && callbacks.onLocalMessage(context.appId, event);\n      }\n    },\n\n    onFileMessage(event: Record<string, unknown>) {\n      if (context.getIsWritable()) {\n        context.dispatchMagixEvent(\"broadcast\", JSON.stringify(event));\n\n        // save last message\n        const lastMsg = JSON.stringify({ ...event, isRestore: true });\n        context.storage.setState({ lastMsg });\n      }\n    },\n  };\n\n  sideEffect.addDisposer(\n    context.addMagixEventListener(\"broadcast\", ({ payload }) => {\n      console.log(payload);\n      callbacks.postMessage(payload);\n    })\n  );\n\n  sideEffect.addEventListener(window, \"message\", ev => {\n    if (!callbacks.isSentBySelf(ev.source)) return;\n    if (typeof ev.data === \"string\") {\n      try {\n        const event = JSON.parse(ev.data);\n        if (typeof event === \"object\" && event !== null) {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          const handler = (handlers as any)[event.method];\n          if (handler) {\n            handler(event);\n          } else {\n            logger.warn(\"unknown message\", event);\n          }\n        }\n      } catch (error) {\n        logger.warn(\"error when parsing message\", error);\n      }\n    } else if (typeof ev.data === \"object\" && ev.data !== null) {\n      logger.log(\"unhandled permission command\", ev.data);\n    }\n  });\n\n  return sideEffect.flushAll.bind(sideEffect);\n}\n","export const width = 630;\nexport const height = 350;\n","import type { AnimationMode, NetlessApp } from \"@netless/window-manager\";\nimport { Logger } from \"@netless/app-shared\";\nimport { SideEffectManager } from \"side-effect-manager\";\nimport { appendQuery, getUserPayload, nextTick } from \"./utils\";\nimport { Renderer } from \"./renderer\";\nimport { Footer } from \"./footer\";\nimport { connect } from \"./connect\";\nimport { height } from \"./hardcode\";\n\nexport interface TalkativeAttributes {\n  /** (required) courseware url */\n  src: string;\n  /** teacher's uid */\n  uid: string;\n  /** current page */\n  page: number;\n  pageNum: number;\n  /** sync to new users */\n  lastMsg: string;\n}\n\nexport interface MagixEventPayloads {\n  broadcast: string;\n}\n\nexport interface TalkativeOptions {\n  debug?: boolean;\n  onLocalMessage?: (appId: string, event: Record<string, unknown>) => void;\n  //抛出一个函数对象，用来接收外部传进来的消息\n  setReceivePostMessageFun?:(fun:(message:unknown)=>void)=>void;\n  //同步数据获取\n  getInfoSync?:(configInfo:string) => unknown;\n}\n\nconst Talkative: NetlessApp<TalkativeAttributes, MagixEventPayloads, TalkativeOptions> = {\n  kind: \"Talkative\",\n  setup(context) {\n    context.storage.ensureState({\n      src: \"https://example.org\",\n      uid: \"\",\n      page: 1,\n      pageNum: 1,\n      lastMsg: \"\",\n    });\n    const ClickThroughAppliances = new Set([\"clicker\"]);\n\n    // const debug = (context.getAppOptions() || {}).debug;\n    const { onLocalMessage, debug,setReceivePostMessageFun,getInfoSync } = (context.getAppOptions() || {}) as TalkativeOptions;\n    const logger = new Logger(\"Talkative\", debug);\n    const { uid } = getUserPayload(context);\n    const sideEffect = new SideEffectManager();\n    const view = context.getView();\n    const room = context.getRoom();\n\n    logger.log(\"my uid\", uid);\n\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    let toggleClickThrough: (enable?: boolean) => void = () => {};\n    const shouldClickThrough = (tool: string) => {\n      return ClickThroughAppliances.has(tool);\n    };\n    const setPage = (page: unknown): void => {\n      if (!view) {\n        logger.warn(\"SetPage: page api is only available with 'scenePath' options enabled.\");\n      } else {\n        const scenePath = context.getInitScenePath();\n        if (typeof page === \"string\" && context.getIsWritable() && scenePath && room) {\n          const fullScenePath = [scenePath, page].join(\"/\");\n          if (room.scenePathType(fullScenePath) === \"none\") {\n            room.putScenes(scenePath, [{ name: page }]);\n          }\n          context.setScenePath(fullScenePath);\n          context.updateAttributes([\"page\"], page);\n        }\n      }\n    };\n    const onPrevPage = () => {\n      const { page } = context.storage.state;\n      if (context.getIsWritable() && page > 1) {\n        context.storage.setState({ page: page - 1 });\n      }\n    };\n\n    const onNextPage = () => {\n      const { page, pageNum } = context.storage.state;\n      if (context.getIsWritable() && page < pageNum) {\n        context.storage.setState({ page: page + 1 });\n      }\n    };\n\n    const renderer = new Renderer(context);\n    const footer = new Footer(context, onPrevPage, onNextPage);\n\n    const postMessage = renderer.postMessage.bind(renderer);\n    setReceivePostMessageFun?.(postMessage)\n    sideEffect.addDisposer(\n      connect({\n        context,\n        logger,\n        postMessage,\n        onRatioChanged: renderer.ratio.set.bind(renderer.ratio),\n        isSentBySelf: source => source === renderer.$iframe.contentWindow,\n        onLocalMessage,\n      })\n    );\n\n    sideEffect.addDisposer(\n      context.storage.addStateChangedListener(() => {\n        // update role\n        const role = context.storage.state.uid === uid ? 0 : 2;\n        renderer.role.set(role);\n        footer.role.set(role);\n        // update page\n        const { page, pageNum } = context.storage.state;\n        postMessage(JSON.stringify({ method: \"onJumpPage\", toPage: page }));\n        footer.text.set(`${page}/${pageNum}`);\n      })\n    );\n\n    if (room) {\n      sideEffect.add(() => {\n        const onRoomStateChanged = (e: { memberState: { currentApplianceName: string } }) => {\n          if (e.memberState) {\n            toggleClickThrough(shouldClickThrough(e.memberState.currentApplianceName));\n          }\n        };\n        room.callbacks.on(\"onRoomStateChanged\", onRoomStateChanged);\n        return () => room.callbacks.off(\"onRoomStateChanged\", onRoomStateChanged);\n      });\n    }\n\n    const on_ready = async () => {\n      sideEffect.addDisposer(renderer.mount());\n      sideEffect.addDisposer(footer.mount());\n\n      const role = context.storage.state.uid === uid ? 0 : 2;\n\n      const method = JSON.stringify({method:\"getTalkActiveUrlParams\"})\n      //url额外的拼接参数\n      const params = await getInfoSync?.(method)\n      console.log('talkativeGetInfoSyncValue111', params)\n\n      const query = `${params}`;\n\n      renderer.$iframe.src = appendQuery(context.storage.state.src, query);\n\n      renderer.role.set(role);\n      footer.role.set(role);\n      const { page, pageNum } = context.storage.state;\n      footer.text.set(`${page}/${pageNum}`);\n      setPage(`${page}`);\n      if (view) {\n        // 添加一个 viewBox，用于添加绘制白板\n        const viewBox = document.createElement(\"div\");\n        Object.assign(viewBox.style, {\n          width: \"100%\",\n          height: \"100%\",\n          position: \"absolute\",\n          top: 0,\n          left: 0,\n          overflow: \"hidden\",\n        });\n        renderer.$content.appendChild(viewBox);\n        context.mountView(viewBox);\n        view.disableCameraTransform = true;\n        sideEffect.add(() => {\n          const onResize = () => {\n            const clientRect = renderer.$content.getBoundingClientRect();\n            const scale = clientRect.height /height;\n            view.moveCamera({ scale, animationMode: \"immediately\" as AnimationMode });\n          };\n          const observer = new ResizeObserver(onResize);\n          observer.observe(renderer.$content);\n          return () => observer.disconnect();\n        });\n\n        toggleClickThrough = (enable?: boolean) => {\n          viewBox.style.pointerEvents = enable ? \"none\" : \"auto\";\n        };\n\n        if (room?.state.memberState.currentApplianceName) {\n          toggleClickThrough(shouldClickThrough(room?.state.memberState.currentApplianceName));\n        }\n      }\n    };\n\n    // if there's no uid, wait for it to exist\n    if (!context.storage.state.uid) {\n      const disposerID = sideEffect.addDisposer(\n        context.storage.addStateChangedListener(() => {\n          if (context.storage.state.uid) {\n            sideEffect.flush(disposerID);\n            on_ready();\n          }\n        })\n      );\n\n      if (context.isAddApp) {\n        logger.log(\"no teacher's uid, setting myself...\");\n        context.storage.setState({ uid });\n      }\n    } else {\n      nextTick.then(on_ready);\n    }\n\n    context.emitter.on(\"destroy\", () => {\n      logger.log(\"destroy\");\n      sideEffect.flushAll();\n    });\n  },\n};\n\nexport default Talkative;\n"],"names":["SOUP","SOUP_LEN","ID_LEN","reusedIdCarrier","genUID","i","invoke","fn","e","SideEffectManager","disposer","disposerID","joinDisposers","executor","disposers","el","type","listener","options","handler","timeout","ticket","uid","root","factory","randomColor","module","exports","this","seed","colorDictionary","loadColorBounds","colorRanges","stringToInteger","H","S","B","totalColors","colors","color","pickHue","pickSaturation","pickBrightness","setFormat","hueRange","getRealHueRange","hue","randomWithin","step","j","min","max","getHueRange","saturationRange","getSaturationRange","sMin","sMax","bMin","getMinimumBrightness","bMax","hsv","HSVtoHSL","hsl","hslColor","alpha","HSVtoRGB","rgb","rgbColor","HSVtoHex","lowerBounds","getColorInfo","s1","v1","s2","v2","m","b","colorInput","number","HexToHSB","colorName","range","golden_ratio","r","rnd","componentToHex","c","hex","defineColor","name","h","v","h_i","p","q","t","g","result","red","green","blue","cMax","delta","saturation","k","string","total","colorHue","Logger","kind","debug","__publicField","messages","getUserPayload","context","room","displayer","memberId","userPayload","_a","member","nickName","userId","cursorName","parse","url","index","appendQuery","query","pathname","search","element","tag","attr","key","value","append","node","detach","nextTick","writable","listeners","newValue","resizeObservers","hasActiveObservations","ro","hasSkippedObservations","msg","deliverResizeLoopError","event","ResizeObserverBoxOptions","freeze","obj","ResizeObserverSize","inlineSize","blockSize","DOMRectReadOnly","x","y","width","height","top","right","bottom","left","rectangle","isSVG","target","isHidden","_b","offsetWidth","offsetHeight","isElement","scope","isReplacedElement","global","cache","scrollRegexp","verticalRegexp","IE","parseDimension","pixel","size","switchSizes","zeroBoxes","calculateBoxSizes","forceRecalculation","cs","svg","removePadding","canScrollVertically","canScrollHorizontally","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTop","borderRight","borderBottom","borderLeft","horizontalPadding","verticalPadding","horizontalBorderArea","verticalBorderArea","horizontalScrollbarThickness","verticalScrollbarThickness","widthReduction","heightReduction","contentWidth","contentHeight","borderBoxWidth","borderBoxHeight","boxes","calculateBoxSize","observedBox","borderBoxSize","contentBoxSize","devicePixelContentBoxSize","ResizeObserverEntry","calculateDepthForNode","depth","parent","broadcastActiveObservations","shallowestDepth","callbacks","entries","ot","entry","targetDepth","_i","callbacks_1","callback","gatherActiveObservationsAtDepth","process","trigger","notify","cb","queueMicroTask","toggle_1","el_1","config","queueResizeObserver","watching","isWatching","CATCH_PERIOD","observerConfig","events","time","scheduled","Scheduler","_this","until","elementsHaveResized","scheduler","updateCount","n","skipNotifyOnElement","ResizeObservation","ResizeObserverDetail","resizeObserver","observerMap","getObservationIndex","observationTargets","ResizeObserverController","detail","firstObservation","lastObservation","ResizeObserver","Polyfill","Renderer","role","ratio","observer","styles","message","arrowLeftSVG","namespace","NS","$svg","arrowRightSVG","Footer","onPrev","onNext","text","connect","logger","sideEffect","handlers","totalPages","data","page","lastMsg","payload","ev","error","Talkative","ClickThroughAppliances","onLocalMessage","setReceivePostMessageFun","getInfoSync","view","toggleClickThrough","shouldClickThrough","tool","setPage","scenePath","fullScenePath","onPrevPage","onNextPage","pageNum","renderer","footer","postMessage","source","onRoomStateChanged","on_ready","method","params","viewBox","onResize","scale","enable"],"mappings":"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"}